#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN CollectionToMulti,1,Geometries,2828da85-65d5-4f49-b698-d879654cc4ff,"Linked by Default",No,NO_PARALLELISM,,No,19617,YES,No,37,No
# <p>Convert FME's Collections to WKT MultiGeometries as FME Aggregates.</p>
# <p>For the convertion it flattens at one level the Collections received at a time, looping until there are no Collections left.</p>
# <p>If there are any geometries that would be internally treatead as Collections are hard-converted to Multi by WKT editing and reconstruction.</p>
# <p>Aggregate geometries are kept, only collections are separeted.</p>
# TRANSFORMER_END
#!   ATTR_TYPE_ENCODING="SDF"
#!   BLOCKED_LOOPING="No"
#!   CATEGORY="Geometries"
#!   DESCRIPTION="&lt;p&gt;Convert FME&apos;s Collections to WKT MultiGeometries as FME Aggregates.&lt;/p&gt;&#10;&lt;p&gt;For the convertion it flattens at one level the Collections received at a time, looping until there are no Collections left.&lt;/p&gt;&#10;&lt;p&gt;If there are any geometries that would be internally treatead as Collections are hard-converted to Multi by WKT editing and reconstruction.&lt;/p&gt;&#10;&lt;p&gt;Aggregate geometries are kept, only collections are separeted.&lt;/p&gt;"
#!   DOC_EXTENTS="3469.14 2592.27"
#!   DOC_TOP_LEFT="53.995 -1931.64"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   FME_BUILD_NUM="19617"
#!   FME_DOCUMENT_GUID="2828da85-65d5-4f49-b698-d879654cc4ff"
#!   FME_DOCUMENT_PRIORGUID="88728b0f-caf6-463b-9875-4a8df780fc18,00fc1635-70dc-49b6-95b2-86d54322d20c,a476fc27-60c2-479c-8615-4a85bfad7d42,cc861cd1-f27a-4ac7-bb94-770730137747,bb98e3b4-52a6-43d9-b387-8b99d676ac75,e66aafac-729a-493f-b791-cf3320557818,9fa21616-d139-4331-981a-2f597e3ae0c4"
#!   FME_LINKED_TRANSFORMER_VERSION="1"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_PROCESS_PRESERVE_GROUP_ATTR="No"
#!   FME_SERVER_SERVICES=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FMX_INSERT_MODE="Linked by Default"
#!   HISTORY=""
#!   ITERATION_COUNT_ATTR=""
#!   LAST_SAVE_BUILD="FME(R) 2019.1.1.0 (20190801 - Build 19617 - WIN64)"
#!   LAST_SAVE_DATE="2020-11-14T15:32:43"
#!   MARKDOWN_DESCRIPTION="Convert FME&apos;s Collections to WKT MultiGeometries as FME Aggregates.&#10;&#10;For the convertion it flattens at one level the Collections received at a time, looping until there are no Collections left.&#10;&#10;If there are any geometries that would be internally treatead as Collections are hard-converted to Multi by WKT editing and reconstruction.&#10;&#10;Aggregate geometries are kept, only collections are separeted."
#!   MARKDOWN_USAGE=""
#!   MAX_LOOP_ITERATIONS=""
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY="37"
#!   SHOW_ANNOTATIONS="true"
#!   SHOW_INFO_NODES="true"
#!   TITLE="CollectionToMulti"
#!   USAGE=""
#!   USE_MARKDOWN="YES"
#!   VIEW_POSITION="-246.877 168.752"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   WORKSPACE_VERSION="1"
#!   XFORM_DEPRECATED="No"
#!   ZOOM_SCALE="100"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! <COMMENT
#!   IDENTIFIER="41"
#!   COMMENT_VALUE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:9pt; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;All features that internally are still considered collections even though FME treats then as otherwise are hard-converted here by WKT editing to ther right type.&lt;/p&gt;&#10;&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;The WKTs are then used to recreate the geometries.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="537.50537505375064 -395.37334373343708"
#!   TOP_LEFT="537.50537505375064 -395.37334373343708"
#!   BOTTOM_RIGHT="1209.3870938709388 -494.12403124031215"
#!   BOUNDING_RECT="537.50537505375064 -395.37334373343708 671.88171881718813 98.750687506875067"
#!   ORDER="500000000000031"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   CUSTOM_USER_COLOR="false"
#!   COLOUR="0.23137254901960785,0.1803921568627451,0.48627450980392156,0.78431372549019607"
#!   SIZE_POLICY="10"
#!   ANCHORED_NODE="0"
#! />
#! <COMMENT
#!   IDENTIFIER="43"
#!   COMMENT_VALUE="&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;&#10;&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;&#10;p, li { white-space: pre-wrap; }&#10;&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;MS Shell Dlg 2&apos;; font-size:9pt; font-weight:400; font-style:normal;&quot;&gt;&#10;&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Simple geometries are converted to Multigeometries&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="537.50537505375064 -1640.6414064140645"
#!   TOP_LEFT="537.50537505375064 -1640.6414064140645"
#!   BOTTOM_RIGHT="1234.3873438734388 -1783.1425314253147"
#!   BOUNDING_RECT="537.50537505375064 -1640.6414064140645 696.88196881968815 142.50112501125011"
#!   ORDER="500000000000033"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   CUSTOM_USER_COLOR="false"
#!   COLOUR="0.42352941176470588,0.16862745098039217,0.46666666666666667,0.78431372549019607"
#!   SIZE_POLICY="10"
#!   ANCHORED_NODE="0"
#! />
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! <BOOKMARK
#!   IDENTIFIER="36"
#!   NAME="Flattens input at one level"
#!   DESCRIPTION=""
#!   TOP_LEFT="603.21893507875666 660.62990629906301"
#!   ORDER="500000000000026"
#!   PALETTE_COLOR="Color4"
#!   BOTTOM_RIGHT="1195.2189350787567 384.62990629906301"
#!   BOUNDING_RECT="603.21893507875666 660.62990629906301 592 276"
#!   STICKY="true"
#!   COLOUR="0.45882352941176469,0.53725490196078429,0.21176470588235294,1"
#!   CONTENTS="23 "
#! >
#! </BOOKMARK>
#! <BOOKMARK
#!   IDENTIFIER="37"
#!   NAME="Collections return to input for further flattening"
#!   DESCRIPTION=""
#!   TOP_LEFT="1259.4754976443821 660.62990629906301"
#!   ORDER="500000000000027"
#!   PALETTE_COLOR="Color5"
#!   BOTTOM_RIGHT="2503.150031500315 324.62990629906301"
#!   BOUNDING_RECT="1259.4754976443821 660.62990629906301 1243.6745338559331 336"
#!   STICKY="true"
#!   COLOUR="0.21568627450980393,0.52549019607843139,0.33333333333333331,1"
#!   CONTENTS="31 34 30 "
#! >
#! </BOOKMARK>
#! <BOOKMARK
#!   IDENTIFIER="38"
#!   NAME="Try to convert all to FME&apos;s aggregates"
#!   DESCRIPTION=""
#!   TOP_LEFT="998.34196630907354 231.87721877218772"
#!   ORDER="500000000000028"
#!   PALETTE_COLOR="Color6"
#!   BOTTOM_RIGHT="1851.4754976443869 -104.12278122781228"
#!   BOUNDING_RECT="998.34196630907354 231.87721877218772 853.13353133531336 336"
#!   STICKY="true"
#!   COLOUR="0.20000000000000001,0.49803921568627452,0.51764705882352946,1"
#!   CONTENTS="4 "
#! >
#! </BOOKMARK>
#! <BOOKMARK
#!   IDENTIFIER="39"
#!   NAME="Removes internal attributes created"
#!   DESCRIPTION=""
#!   TOP_LEFT="2171.7469374693742 -253.12403124031215"
#!   ORDER="500000000000029"
#!   PALETTE_COLOR="Color7"
#!   BOTTOM_RIGHT="2950.0295002950033 -529.12403124031221"
#!   BOUNDING_RECT="2171.7469374693742 -253.12403124031215 778.28256282562916 276"
#!   STICKY="true"
#!   COLOUR="0.20000000000000001,0.36078431372549019,0.51764705882352946,1"
#!   CONTENTS="26 "
#! >
#! </BOOKMARK>
#! <BOOKMARK
#!   IDENTIFIER="40"
#!   NAME="WKT Conversion"
#!   DESCRIPTION=""
#!   TOP_LEFT="462.50462504625051 -174.99824998249966"
#!   ORDER="500000000000030"
#!   PALETTE_COLOR="Color8"
#!   BOTTOM_RIGHT="1851.4754976443851 -1353.5078750787493"
#!   BOUNDING_RECT="462.50462504625051 -174.99824998249966 1388.9708725981345 1178.5096250962497"
#!   STICKY="true"
#!   COLOUR="0.23137254901960785,0.1803921568627451,0.48627450980392156,1"
#!   CONTENTS="41 6 5 9 14 7 13 8 15 12 "
#! >
#! </BOOKMARK>
#! <BOOKMARK
#!   IDENTIFIER="42"
#!   NAME="Simple to Multi"
#!   DESCRIPTION=""
#!   TOP_LEFT="496.87996879968796 -1440.0155001550015"
#!   ORDER="500000000000032"
#!   PALETTE_COLOR="Color9"
#!   BOTTOM_RIGHT="1851.4754976443869 -1931.6426564265641"
#!   BOUNDING_RECT="496.87996879968796 -1440.0155001550015 1354.5955288446989 491.62715627156263"
#!   STICKY="true"
#!   COLOUR="0.42352941176470588,0.16862745098039217,0.46666666666666667,1"
#!   CONTENTS="43 18 20 19 "
#! >
#! </BOOKMARK>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="GeometryCoercer"
#!   VERSION="6"
#!   POSITION="1347.4754976443821 121.87721877218772"
#!   BOUNDING_RECT="1347.4754976443821 121.87721877218772 454 71"
#!   ORDER="500000000000020"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19608"
#! >
#!     <OUTPUT_FEAT NAME="COERCED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <OUTPUT_FEAT NAME="UNTOUCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_PARM PARM_NAME="GQUERY" PARM_VALUE="for&lt;space&gt;&lt;dollar&gt;geom&lt;space&gt;in&lt;space&gt;&lt;solidus&gt;&lt;solidus&gt;geometry&lt;lf&gt;where&lt;space&gt;&lt;dollar&gt;geom&lt;solidus&gt;count&lt;openparen&gt;parent::geometry&lt;closeparen&gt;&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;return&lt;space&gt;number&lt;openparen&gt;&lt;dollar&gt;geom&lt;solidus&gt;&lt;at&gt;fme_id&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="GQUERY_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="KIND" PARM_VALUE="fme_aggregate"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="GeometryCoercer_3"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="5"
#!   TYPE="GeometryExtractor"
#!   VERSION="15"
#!   POSITION="1347.4754976443821 -284.99824998249966"
#!   BOUNDING_RECT="1347.4754976443821 -284.99824998249966 454 71"
#!   ORDER="500000000000011"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="__geom" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;REJECTED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="fme_rejection_code" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="ATTR" PARM_VALUE="__geom"/>
#!     <XFORM_PARM PARM_NAME="ELLIPSOID_NAME" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="GEOHASH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="GEOHASH_PRECISION_DISPLAY" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ISO6709_FORMAT_CHOICE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ISO6709_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ISO6709_MAX_DECIMAL_PLACES" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="JSON_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="JSON_MAX_DIGITS" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="KIND_LONG" PARM_VALUE="OGC Well Known Text"/>
#!     <XFORM_PARM PARM_NAME="LETTERING" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="LEVELS_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="MGRS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="MSSQL_FORMAT_CHOICE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="MSSQL_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="OGCVERSION" PARM_VALUE="1.2"/>
#!     <XFORM_PARM PARM_NAME="OGC_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#!     <XFORM_PARM PARM_NAME="OGC_WKT_PRECISION_DISPLAY" PARM_VALUE="64-bit"/>
#!     <XFORM_PARM PARM_NAME="OGEOSMS_URL_PREFIX" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="OMIT_NAMESPACES_DISPLAY" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="POLYLINE_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PRECISION" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="PREFER_POLYGON_OVER_SURFACE" PARM_VALUE="No"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_GEOMETRY" PARM_VALUE="Yes"/>
#!     <XFORM_PARM PARM_NAME="SRS_AXIS_ORDER_DISPLAY" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SRS_NAME" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="GeometryExtractor_4"/>
#!     <XFORM_PARM PARM_NAME="XML_GROUP" PARM_VALUE=""/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="6"
#!   TYPE="StringReplacer"
#!   VERSION="5"
#!   POSITION="1347.4754976443821 -538.12578125781397"
#!   BOUNDING_RECT="1347.4754976443821 -538.12578125781397 454 71"
#!   ORDER="500000000000012"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="__geom" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="GEOMETRYCOLLECTION&lt;space&gt;&lt;openparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="__geom"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer_5"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="7"
#!   TYPE="StringReplacer"
#!   VERSION="5"
#!   POSITION="1347.4754976443821 -719.37709377093915"
#!   BOUNDING_RECT="1347.4754976443821 -719.37709377093915 454 71"
#!   ORDER="500000000000012"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="__geom" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="CASE" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="FIND_TEXT" PARM_VALUE="&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH" PARM_VALUE="_FME_NO_OP_"/>
#!     <XFORM_PARM PARM_NAME="NO_MATCH_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REGEXP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="REPLACE_TEXT" PARM_VALUE="&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="SRC_ATTRS" PARM_VALUE="__geom"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="StringReplacer_6"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="8"
#!   TYPE="GeometryReplacer"
#!   VERSION="10"
#!   POSITION="1347.4754976443821 -910.00450004500067"
#!   BOUNDING_RECT="1347.4754976443821 -910.00450004500067 454 71"
#!   ORDER="500000000000013"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <OUTPUT_FEAT NAME="&lt;REJECTED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="__geom" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="fme_rejection_code" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="ELLIPSOID_NAME" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ENC_PARAMETERS_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#!     <XFORM_PARM PARM_NAME="KIND_LONG" PARM_VALUE="OGC Well Known Text"/>
#!     <XFORM_PARM PARM_NAME="LETTERING" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="MSSQL_FORMAT_CHOICE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="OGC_WKT_PRECISION_DISPLAY" PARM_VALUE="64-bit"/>
#!     <XFORM_PARM PARM_NAME="OUTPUT_POINT_DISPLAY" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRIBUTE" PARM_VALUE="Yes"/>
#!     <XFORM_PARM PARM_NAME="SOURCE" PARM_VALUE="&lt;at&gt;Value&lt;openparen&gt;__geom&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="SRS_AXIS_ORDER_DISPLAY" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="GeometryReplacer_3"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="9"
#!   TYPE="GeometryCoercer"
#!   VERSION="6"
#!   POSITION="1347.4754976443821 -1127.5078750787497"
#!   BOUNDING_RECT="1347.4754976443821 -1127.5078750787497 454 71"
#!   ORDER="500000000000020"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19608"
#! >
#!     <OUTPUT_FEAT NAME="COERCED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <OUTPUT_FEAT NAME="UNTOUCHED"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_PARM PARM_NAME="GQUERY" PARM_VALUE="for&lt;space&gt;&lt;dollar&gt;geom&lt;space&gt;in&lt;space&gt;&lt;solidus&gt;&lt;solidus&gt;geometry&lt;lf&gt;where&lt;space&gt;&lt;dollar&gt;geom&lt;solidus&gt;count&lt;openparen&gt;parent::geometry&lt;closeparen&gt;&lt;space&gt;=&lt;space&gt;0&lt;lf&gt;return&lt;space&gt;number&lt;openparen&gt;&lt;dollar&gt;geom&lt;solidus&gt;&lt;at&gt;fme_id&lt;closeparen&gt;"/>
#!     <XFORM_PARM PARM_NAME="GQUERY_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="KIND" PARM_VALUE="fme_aggregate"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="GeometryCoercer_4"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="18"
#!   TYPE="Counter"
#!   VERSION="2"
#!   POSITION="1347.4754976443851 -1550.0155001550015"
#!   BOUNDING_RECT="1347.4754976443851 -1550.0155001550015 454 71"
#!   ORDER="500000000000021"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="__count" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="&lt;REJECTED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="fme_rejection_code" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="__count" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_PARM PARM_NAME="CNT_ATTR" PARM_VALUE="__count"/>
#!     <XFORM_PARM PARM_NAME="DOMAIN" PARM_VALUE="counter"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SCOPE" PARM_VALUE="Local"/>
#!     <XFORM_PARM PARM_NAME="START" PARM_VALUE="0"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="Counter"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="19"
#!   TYPE="Aggregator"
#!   VERSION="15"
#!   POSITION="1347.4754976443851 -1765.6426564265641"
#!   BOUNDING_RECT="1347.4754976443851 -1765.6426564265641 454 71"
#!   ORDER="500000000000022"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="AGGREGATE"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="__count" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ACCUM_ATTRS_NAME" PARM_VALUE="Use Attributes From One Feature"/>
#!     <XFORM_PARM PARM_NAME="AGGREGATE_TYPE" PARM_VALUE="Homogeneous Collection (If Possible)"/>
#!     <XFORM_PARM PARM_NAME="ASSEMBLE_HIERARCHY_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ASSEMBLE_ONE_LEVEL_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#!     <XFORM_PARM PARM_NAME="ATTR_ACCUM_GROUP" PARM_VALUE="FME_DISCLOSURE_OPEN"/>
#!     <XFORM_PARM PARM_NAME="ATTR_TO_TRAIT" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="AV" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="CHILD_ID_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="CONCAT_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="COUNT_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="CYCLE_ID_ERROR_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="GENERATE_LIST_GROUP" PARM_VALUE="NO"/>
#!     <XFORM_PARM PARM_NAME="GEOM_NAME_FIELD" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="GROUP_BY" PARM_VALUE="__count"/>
#!     <XFORM_PARM PARM_NAME="GROUP_BY_MODE" PARM_VALUE="No"/>
#!     <XFORM_PARM PARM_NAME="ID_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ID_SELECTION" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS_TO_INCLUDE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS_TO_INCLUDE_MODE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="LIST_NAME" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="MODE" PARM_VALUE="Geometry - Assemble One Level"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARENT_ID_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="PRESERVE_ID" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="SEP" PARM_VALUE="&lt;comma&gt;"/>
#!     <XFORM_PARM PARM_NAME="SUM" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="WEIGHT" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="Aggregator"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="23"
#!   TYPE="Deaggregator"
#!   VERSION="10"
#!   POSITION="691.21893507875666 550.62990629906301"
#!   BOUNDING_RECT="691.21893507875666 550.62990629906301 454 71"
#!   ORDER="500000000000023"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="DEAGGREGATED"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="ATTR_ACCUM_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_ACCUM_MODE" PARM_VALUE="Merge List Attributes"/>
#!     <XFORM_PARM PARM_NAME="ATTR_CONFLICT_RES" PARM_VALUE="Use List Attribute Values"/>
#!     <XFORM_PARM PARM_NAME="CHILD_ID_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="COPY_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="EXPLODE_INSTANCES" PARM_VALUE="No"/>
#!     <XFORM_PARM PARM_NAME="FLATTEN_ONE_LEVEL_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="GEOM_NAME_FIELD" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ID_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="ID_SELECTION" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="INCOMING_PREFIX" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTR" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTR_MODE_LOOKUP" PARM_VALUE="LEAN"/>
#!     <XFORM_PARM PARM_NAME="MODE" PARM_VALUE="Flatten One Level"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARENT_ID_ATTR" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="PART_NUMBER_FIELD" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PRESERVE_HIERARCHY_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="SPLIT_COMPOSITES" PARM_VALUE="No"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="Deaggregator"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="26"
#!   TYPE="AttributeRemover"
#!   VERSION="1"
#!   POSITION="2387.8732187321875 -363.12403124031215"
#!   BOUNDING_RECT="2387.8732187321875 -363.12403124031215 454 71"
#!   ORDER="500000000000024"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="__count"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="AttributeRemover"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="31"
#!   TYPE="GeometryFilter"
#!   VERSION="7"
#!   POSITION="1347.4754976443821 550.62990629906301"
#!   BOUNDING_RECT="1347.4754976443821 550.62990629906301 454 71"
#!   ORDER="500000000000025"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="19617"
#! >
#!     <OUTPUT_FEAT NAME="COLLECTION"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_PARM PARM_NAME="BREAK_AGG" PARM_VALUE="No"/>
#!     <XFORM_PARM PARM_NAME="GEOM_PORT_NAMES" PARM_VALUE="Collection"/>
#!     <XFORM_PARM PARM_NAME="INSTANTIATE" PARM_VALUE="&lt;Unused&gt;"/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="GeometryFilter"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="2"
#!   NAME="Input"
#!   POSITION="53.994999949999738 550.62990629906301"
#!   BOUNDING_RECT="53.994999949999738 550.62990629906301 454 71"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="3"
#!   NAME="Output"
#!   POSITION="3069.1300313003148 -423.12403124031215"
#!   BOUNDING_RECT="3069.1300313003148 -423.12403124031215 454 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="30"
#!   NAME="Input"
#!   POSITION="1919.118531185313 490.62990629906301"
#!   BOUNDING_RECT="1919.118531185313 490.62990629906301 430 71"
#!   COLLAPSED="true"
#!   IS_SOURCE="loop"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="24"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="23"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="27"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="26"
#!   SOURCE_PORT_DESC="fo 0 COERCED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="12"
#!   SOURCE_NODE="5"
#!   TARGET_NODE="6"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="13"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="7"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="7"
#!   TARGET_NODE="8"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="15"
#!   SOURCE_NODE="8"
#!   TARGET_NODE="9"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="29"
#!   SOURCE_NODE="9"
#!   TARGET_NODE="26"
#!   SOURCE_PORT_DESC="fo 0 COERCED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="20"
#!   SOURCE_NODE="18"
#!   TARGET_NODE="19"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="28"
#!   SOURCE_NODE="19"
#!   TARGET_NODE="26"
#!   SOURCE_PORT_DESC="fo 0 AGGREGATE"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="32"
#!   SOURCE_NODE="23"
#!   TARGET_NODE="31"
#!   SOURCE_PORT_DESC="fo 0 DEAGGREGATED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="33"
#!   SOURCE_NODE="26"
#!   TARGET_NODE="3"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="34"
#!   SOURCE_NODE="31"
#!   TARGET_NODE="30"
#!   SOURCE_PORT_DESC="fo 0 COLLECTION"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="5"
#!   SOURCE_PORT_DESC="fo 1 UNTOUCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="9"
#!   TARGET_NODE="18"
#!   SOURCE_PORT_DESC="fo 1 UNTOUCHED"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="35"
#!   SOURCE_NODE="31"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="fo 1 &lt;lt&gt;UNFILTERED&lt;gt&gt;"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>

#! START_HEADER
#! END_HEADER

DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO CollectionToMulti_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(CollectionToMulti_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(CollectionToMulti_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(CollectionToMulti_WORKSPACE_NAME)_Input1605378763 Input Splitter"   INPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
FACTORY_DEF * DeaggregateFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_Deaggregator    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Input"    ATTR_ACCUM_MODE "HANDLE_CONFLICT"    ATTR_CONFLICT_RES "INCOMING_IF_CONFLICT"    INCOMING_PREFIX "<Unused>"    RECURSIVE No    SPLIT_COMPOSITES No    INSTANTIATE_GEOMETRY_INSTANCES_NEW No    SET_FME_TYPE Yes    OUTPUT POINT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Deaggregator_DEAGGREGATED"    OUTPUT LINE FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Deaggregator_DEAGGREGATED"    OUTPUT POLYGON FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Deaggregator_DEAGGREGATED"    OUTPUT DONUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Deaggregator_DEAGGREGATED"    OUTPUT AGGREGATE FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Deaggregator_DEAGGREGATED"
# -------------------------------------------------------------------------
MACRO OUTPUT_COLLECTION_FTYPE not_selected
MACRO OUTPUT_COLLECTION_FTYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_COLLECTION
MACRO OUTPUT_INSTANCE_FTYPE not_selected
Lookup $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_RouterTable   ""  "not_selected"   fme_collection $(OUTPUT_COLLECTION_FTYPE)
MACRO COLLECTION_HANDLING NOT_THIS_TIME
MACRO INSTANCE_FILTERING *
INCLUDE [    if 0 {       puts "MACRO COLLECTION_HANDLING *";       if <Unused> {          puts "MACRO INSTANCE_FILTERING NOT_THIS_TIME";       };    };    if {{$(OUTPUT_INSTANCE_FTYPE)} == "not_selected"} {       puts "MACRO INSTANCE_FILTERING NOT_THIS_TIME";    }; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_InputPassThrough    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Deaggregator_DEAGGREGATED"    OUTPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Input___       @Geometry(FIX_FMETYPE_FMEGEOMETRY)
FACTORY_DEF $(INSTANCE_FILTERING) TestFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_InstanceTest    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Input___    TEST @Geometry(IS_GEOMETRY_INSTANCE) == 1    OUTPUT PASSED FEATURE_TYPE $(OUTPUT_INSTANCE_FTYPE)    OUTPUT FAILED FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Input___
FACTORY_DEF $(COLLECTION_HANDLING) TestFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_CollectionTest    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Input___    TEST &fme_type == "fme_collection"    OUTPUT FAILED FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Not_Collection___    OUTPUT PASSED FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Collection___
FACTORY_DEF $(COLLECTION_HANDLING) DeaggregateFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_Deagg    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Collection___    HOMOGENIZE_COLLECTIONS YES    RECURSIVE YES    SET_FME_TYPE YES    INSTANTIATE_GEOMETRY_INSTANCES_NEW <Unused>    OUTPUT POINT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___HomogeneousAggregate___    OUTPUT LINE FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___HomogeneousAggregate___    OUTPUT POLYGON FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___HomogeneousAggregate___    OUTPUT DONUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___HomogeneousAggregate___    OUTPUT AGGREGATE FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___HomogeneousAggregate___
FACTORY_DEF * TeeFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_RouterPrepper    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___HomogeneousAggregate___    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Not_Collection___    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Input___    OUTPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Prepped___        $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_33098f64_d515_436d_82ff_5ef8a87f246a0_targetFeatureType @Lookup($(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_RouterTable,&fme_type)
FACTORY_DEF * TestFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_Router    INPUT FEATURE_TYPE $(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter___Prepped___    TEST @Value($(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_33098f64_d515_436d_82ff_5ef8a87f246a0_targetFeatureType) != "not_selected"    OUTPUT PASSED FEATURE_TYPE * @FeatureType(@Value($(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_33098f64_d515_436d_82ff_5ef8a87f246a0_targetFeatureType))                                 @RemoveAttributes($(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_33098f64_d515_436d_82ff_5ef8a87f246a0_targetFeatureType)    OUTPUT FAILED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_<UNFILTERED>"        @RemoveAttributes($(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_33098f64_d515_436d_82ff_5ef8a87f246a0_targetFeatureType)
# -------------------------------------------------------------------------
FACTORY_DEF * GQueryFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_<UNFILTERED>"    GQUERY "@EvaluateExpression(FDIV,STRING_ENCODED,for<space><dollar>geom<space>in<space><solidus><solidus>geometry<lf>where<space><dollar>geom<solidus>count<openparen>parent::geometry<closeparen><space>=<space>0<lf>return<space>number<openparen><dollar>geom<solidus><at>fme_id<closeparen>,$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3)"    ACTION COERCE_GEOMETRY    PARAMETER fme_aggregate BASENAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3    OUTPUT RESULT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3_COERCED"    OUTPUT UNTOUCHED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3_UNTOUCHED"
# -------------------------------------------------------------------------
# First determine which function we are going to be using -- we can do
# this statically at parse time for efficiency sake
MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function
INCLUDE [ if {{wkt} == {fmebinary} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @Geometry(TO_ATTRIBUTE_BINARY,"__geom") }           } elseif {{wkt} == {fmehex} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @Geometry(TO_ATTRIBUTE_BINARY_HEX,"__geom") }           } elseif {{wkt} == {fmexml} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @Geometry(TO_ATTRIBUTE,"__geom") }           } elseif {{wkt} == {polyline} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @Geometry(TO_ATTRIBUTE_POLYLINE,"__geom",<Unused>) }           } elseif {{wkt} == {wkt} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @OGCGeometry(to_attribute,wkt,"__geom",1.2,FLOAT_64) }           } elseif {{wkt} == {wkb} ||                     {wkt} == {wkbhex} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @OGCGeometry(to_attribute,wkt,"__geom",1.2) }           } elseif {{wkt} == {GEOJSON} ||                     {wkt} == {ESRIJSON} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @JSONGeometry(TO_ATTRIBUTE,wkt,"__geom",<Unused>) }           } elseif {{wkt} == {KML} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @KMLGeometry(TO_ATTRIBUTE,"__geom",<Unused>) }           } elseif {{wkt} == {GEORSS_SIMPLE} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @GeoRSSGeometry(TO_ATTRIBUTE,wkt,"__geom",<Unused>) }           } elseif {{wkt} == {GML_2.1.2} ||                     {wkt} == {GML_3.1.1} ||                     {wkt} == {GML_3.2.1} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @GMLGeometry(TO_ATTRIBUTE,wkt,"__geom",<Unused>,NO,,) }           } elseif {{wkt} == {geohash} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @GeoHash(TO_ATTRIBUTE,"__geom",<Unused>) }           } elseif {{wkt} == {ogeosms} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @OGCGeometry(to_attribute,wkt,"__geom",<Unused>) }           } elseif {{wkt} == {geosms} ||                     {wkt} == {geo}    } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @OGCGeometry(to_attribute,wkt,"__geom") }           } elseif {{wkt} == {mgrs} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @SupplyAttributes(__geom, @MGRS(TO_MGRS, <Unused>, <Unused>, "<Unused>")) }           } elseif {{wkt} == {mssql} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @SerializeGeometry(to_attribute,wkt,"__geom","<Unused>")}           } elseif {{wkt} == {iso6709} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @GeographicPoint(TO_ATTRIBUTE,"__geom","<Unused>","<Unused>")}           } elseif {{wkt} == {qlikmaps} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function @Geometry(TO_ATTRIBUTE_QLIKMAPS_POLYLINE,"__geom",<Unused>) }           }         ]
# Next determine if we should remove the geometry and also do this once at parse time
# By default, the macro has nothing, meaning we do not remove. If we want to remove, then we'll set the macro to do so
MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_GeometryRemoveFunction
INCLUDE [ if {{Yes} == {Yes} } {               puts {MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_GeometryRemoveFunction @RemoveGeometry() }           }         ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3_UNTOUCHED"    OUTPUT FEATURE_TYPE ___TOREJECTOR___         @RenameAttributes(FME_STRICT,___fme_rejection_code___,fme_rejection_code)         $($(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Function)         $($(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_GeometryRemoveFunction)
FACTORY_DEF * TestFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_Rejector    INPUT FEATURE_TYPE ___TOREJECTOR___    TEST @Value(fme_rejection_code) != ""    FEATURE_TABLE_SHIM_SUPPORT Yes    OUTPUT FAILED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_OUTPUT"       @RenameAttributes(FME_STRICT,fme_rejection_code,___fme_rejection_code___)
# -------------------------------------------------------------------------
FACTORY_DEF {*} StringReplacerFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_StringReplacer_5    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryExtractor_4_OUTPUT"    USE_REGEX NO    CASE_SENSITIVE NO    SOURCE_ATTRIBUTES { __geom }    FIND_TEXT { GEOMETRYCOLLECTION<space><openparen> }    REPLACE_TEXT {  }    REPLACE_NO_MATCH { _FME_NO_OP_ }    OUTPUT OUTPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_StringReplacer_5_OUTPUT"
# -------------------------------------------------------------------------
FACTORY_DEF {*} StringReplacerFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_StringReplacer_6    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_StringReplacer_5_OUTPUT"    USE_REGEX NO    CASE_SENSITIVE NO    SOURCE_ATTRIBUTES { __geom }    FIND_TEXT { <closeparen><closeparen><closeparen><closeparen> }    REPLACE_TEXT { <closeparen><closeparen><closeparen> }    REPLACE_NO_MATCH { _FME_NO_OP_ }    OUTPUT OUTPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_StringReplacer_6_OUTPUT"
# -------------------------------------------------------------------------
# First determine which function we are going to be using -- we can do
# this statically at parse time for efficiency sake
MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_SetTempAttr
MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function
MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_RemoveTempAttr
MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_RemoveSourceAttr
INCLUDE [ set sourceText {@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>__geom<closeparen>,$(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3)};           set decodedText [FME_DecodeText "$sourceText"];           if ![regexp {@EvaluateExpression\([^)]*STRING_ENCODED,@Value\(([^()]*)\),[^()]*\)} "$decodedText" dummy geomSrcAttr] {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_SetTempAttr @SupplyAttributes(ENCODED,__GeometryReplacerTemp__,\"$sourceText\")";               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_RemoveTempAttr @RemoveAttributes(__GeometryReplacerTemp__)";               set geomSrcAttr __GeometryReplacerTemp__;           } elseif {{Yes} == {Yes} } {                puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_RemoveSourceAttr @RemoveAttributes(\"$geomSrcAttr\")";           };           if {{wkt} == {fmebinary} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @Geometry(FROM_ATTRIBUTE_BINARY,\"$geomSrcAttr\")";           } elseif {{wkt} == {fmehex} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @Geometry(FROM_ATTRIBUTE_BINARY_HEX,\"$geomSrcAttr\")";           } elseif {{wkt} == {fmexml} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @Geometry(FROM_ATTRIBUTE,\"$geomSrcAttr\")";           } elseif {{wkt} == {fmexmlencoded} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @Geometry(FROM_ENCODED_STRING,&\"$geomSrcAttr\")";           } elseif {{wkt} == {polyline} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @Geometry(FROM_ATTRIBUTE_POLYLINE,\"$geomSrcAttr\")";           } elseif {{wkt} == {wkt} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @OGCGeometry(from_attribute,wkt,\"$geomSrcAttr\",FLOAT_64)";           } elseif {{wkt} == {wkb} ||                      {wkt} == {wkbhex} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @OGCGeometry(from_attribute,wkt,\"$geomSrcAttr\")";           } elseif {{wkt} == {GEOJSON} ||                     {wkt} == {ESRIJSON} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @JSONGeometry(FROM_ATTRIBUTE,wkt,\"$geomSrcAttr\")";           } elseif {{wkt} == {GEORSS} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @GeoRSSGeometry(FROM_ATTRIBUTE,\"$geomSrcAttr\")";           } elseif {{wkt} == {KML} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @KMLGeometry(FROM_ATTRIBUTE,\"$geomSrcAttr\")";           } elseif {{wkt} == {GML} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @GMLGeometry(FROM_ATTRIBUTE,\"$geomSrcAttr\",<Unused>)";           } elseif {{wkt} == {geohash} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @GeoHash(FROM_ATTRIBUTE,\"$geomSrcAttr\",<Unused>)";           } elseif {{wkt} == {ogeosms} ||                     {wkt} == {geosms}  ||                     {wkt} == {geo} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @OGCGeometry(from_attribute,wkt,\"$geomSrcAttr\")";           } elseif {{wkt} == {mgrs}} {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @MGRS(FROM_MGRS, <Unused>, <Unused>,\"@EvaluateExpression(FDIV,STRING_ENCODED,<at>Value<openparen>__geom<closeparen>,$(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3)\")"           } elseif {{wkt} == {mssql} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @SerializeGeometry(from_attribute,wkt,\"$geomSrcAttr\",<Unused>)";           } elseif {{wkt} == {iso6709} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @GeographicPoint(FROM_ATTRIBUTE,\"$geomSrcAttr\")";           } elseif {{wkt} == {qlikmaps} } {               puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function @Geometry(FROM_ATTRIBUTE_QLIKMAPS_POLYLINE,\"$geomSrcAttr\")";           }; ]
FACTORY_DEF * TeeFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_StringReplacer_6_OUTPUT"    OUTPUT FEATURE_TYPE ___TOREJECTOR___         @RenameAttributes(FME_STRICT,___fme_rejection_code___,fme_rejection_code)         $($(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_SetTempAttr)         $($(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Function)         $($(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_RemoveTempAttr)
FACTORY_DEF * TestFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_Rejector    INPUT FEATURE_TYPE ___TOREJECTOR___    TEST @Value(fme_rejection_code) != ""    OUTPUT FAILED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_OUTPUT"       @RenameAttributes(FME_STRICT,fme_rejection_code,___fme_rejection_code___)       $($(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_RemoveSourceAttr)
# -------------------------------------------------------------------------
FACTORY_DEF * GQueryFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryReplacer_3_OUTPUT"    GQUERY "@EvaluateExpression(FDIV,STRING_ENCODED,for<space><dollar>geom<space>in<space><solidus><solidus>geometry<lf>where<space><dollar>geom<solidus>count<openparen>parent::geometry<closeparen><space>=<space>0<lf>return<space>number<openparen><dollar>geom<solidus><at>fme_id<closeparen>,$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4)"    ACTION COERCE_GEOMETRY    PARAMETER fme_aggregate BASENAME $(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4    OUTPUT RESULT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4_COERCED"    OUTPUT UNTOUCHED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4_UNTOUCHED"
# -------------------------------------------------------------------------
# Create the DomainName that this transformer will use.
# Because @Count itself will evalute the expression to calculate the
# domain, we don't need to do anything in Tcl per feature going by
INCLUDE [    set domainPrefix {};    if { {Local} == {Local} }    {       set domainPrefix [FME_EncodeText {$(CollectionToMulti_WORKSPACE_NAME)_Counter_}];    };    puts "MACRO $(CollectionToMulti_WORKSPACE_NAME)_Counter_FULL_DOMAIN ${domainPrefix}counter"; ]
FACTORY_DEF * ExecuteFunctionFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_Counter_Rejector    COMMAND_PARM_EVALUATION SINGLE_PASS    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4_UNTOUCHED"    FUNCTION_DEFINITION @Count(REJECTABLE_WITH_FLAG,fme_encoded,$($(CollectionToMulti_WORKSPACE_NAME)_Counter_FULL_DOMAIN),"0")    RESULT_ATTRIBUTE "__count"    OUTPUT COMPLETE FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Counter_OUTPUT"    OUTPUT REJECTED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Counter_<REJECTED>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(CollectionToMulti_WORKSPACE_NAME)_Counter <REJECTED> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Counter_<REJECTED>"
# -------------------------------------------------------------------------
FACTORY_DEF {*} AggregateFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_Aggregator    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Counter_OUTPUT"    MODE ONE_LEVEL    GROUP_BY { __count }    FLUSH_WHEN_GROUPS_CHANGE No    REMOVE_GEOMETRY NO    ACCUMULATE_ATTRIBUTES One    LIST_ATTRS_TO_INCLUDE { <Unused> }    LIST_ATTRS_TO_INCLUDE_MODE <Unused>    SEPARATOR <comma>    PRODUCE_MULTIS YES    OUTPUT AGGREGATE FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Aggregator_AGGREGATE"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(CollectionToMulti_WORKSPACE_NAME)_AttributeRemover_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "\\{\[0-9\]+\\}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(CollectionToMulti_WORKSPACE_NAME)_AttributeRemover    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_3_COERCED"    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryCoercer_4_COERCED"    INPUT  FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Aggregator_AGGREGATE"    OUTPUT { FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_AttributeRemover_OUTPUT"        @RemoveAttributes(fme_encoded,__count)        @RemoveAttributes(fme_pcre_match"$($(CollectionToMulti_WORKSPACE_NAME)_AttributeRemover_LIST_EXP)")         }
FACTORY_DEF * BranchingFactory   TARGET_FACTORY "$(CollectionToMulti_WORKSPACE_NAME)_Input1605378763 Input Splitter"   FACTORY_NAME "Loop to $(CollectionToMulti_WORKSPACE_NAME)_Input1605378763 Input Splitter"   MAXIMUM_COUNT -1   INPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_GeometryFilter_COLLECTION"   OUTPUT PASSED FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Input"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(CollectionToMulti_WORKSPACE_NAME)_Output1605378763 Output Collector"   INPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_AttributeRemover_OUTPUT"   OUTPUT FEATURE_TYPE "$(CollectionToMulti_WORKSPACE_NAME)_Output"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(CollectionToMulti_WORKSPACE_NAME))}]
